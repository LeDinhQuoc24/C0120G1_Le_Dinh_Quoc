<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h2  style='position:relative;left: 560px;top:70px;'>Thông tin khách hàng</h2>
<table border='1' cellspacing='1' cellpadding='1' style='position:relative;left: 500px;top:60px;'>

    <tr >
        <td style="width:120px">Tên khách hàng </td>
        <td style="width:120px"><input type="text"  id="name"/></td>
    </tr>
    <tr>
        <td style="width:120px">CMND </td>
        <td style="width:120px"><input type="number" id="idcard" onchange="checkidcard()"></td>
    </tr>
    <tr>
        <td style="width:120px">Năm sinh </td>
        <td style="width:120px"><input type="date" id="birthdayCustomer"style="width: 168px"></td>
    </tr>
    <tr >
        <td style="width:120px">  Địa chỉ email</td>
        <td style="width:120px"><input type="text" id="emailCustomer" onchange="checkemailCustomer()"></td>
    </tr>
    <tr >
        <td style="width:120px">  Địa chỉ sinh sống </td>
        <td style="width:120px"><input type="text" id="addressCustomer"></td>
    </tr>
    <tr >
        <td style="width:120px"> Thẻ khách hàng </td>
        <td style="width:120px"><select style="width: 173px"id="typeCustomer"><option value="Diamond">Diamond</option>
            <option value="Platinum">Platinum</option>
            <option value="Gold">Gold</option>
            <option value="Silver">Silver</option>
            <option value="Member">Member</option></select></td>
    </tr>
    <tr>
        <td style="width:120px">Giảm giá </td>
        <td style="width:120px"><input type="number" id="discount"></td>
    </tr>
    <tr>
        <td style="width:120px">Số lượng đi kèm </td>
        <td style="width:120px"><input type="number" id="numberofAccompanying"></td>
    </tr>
    <tr>
        <td style="width:120px">Ngày thuê </td>
        <td style="width:120px"><input type="number" id="rentDays"></td>
    </tr>
    <tr >
        <td style="width:120px"> Loại dịch vụ </td>
        <td style="width:120px"><select style="width: 173px"id="typeService"><option value="Villa">Villa</option>
            <option value="House">House</option>
            <option value="Room">Room</option></select></td>
    </tr>

    <tr>
        <td colspan="2"> <button type="button"id="1" onclick="hienthi1()"style="width: 350px"
        >Hiển thị thông tin đăng ký</button> </td>
    </tr>
    <tr >
        <td colspan="2"> <button type="button"id="2"onclick="hienthi2()"style="width: 350px"
        >Chỉnh sửa thông tin đăng ký</button> </td>
    </tr>
    <tr >
        <td colspan="2"><input type="button" id="3" value="Tiền thanh toán"onclick="hienthi3()" style="width: 350px"/></td>
    </tr>

</table>
<script>
    //Xét tính hợp lệ của chứng minh nhân dân
    //Chưa thông báo được trường hợp nhập dấu -
    //Nếu click vào lại mà không thay đổi thì không hiện thông báo nhập sai
    function checkidcard(){
        let identitycard=document.getElementById("idcard").value;
        let checkidentitycard=true;
        while(checkidentitycard){
            if(!isNaN(identitycard)){
                identitycard=Number.parseFloat(identitycard);
                if(Number.isInteger(identitycard)){
                    if(Number.parseFloat(identitycard)>100000000&&Number.parseFloat(identitycard)<999999999){
                        checkidentitycard=false;
                        alert("Nhập CMND thành công");
                        document.getElementById("idcard").style.color = "blue";
                        break;
                    }else{
                        alert("Nhập đúng giá trị số CMND");
                        document.getElementById("idcard").style.color = "black";
                        break;
                    }
                }else{
                    alert("Nhập số CMND là 1 số nguyên");
                    document.getElementById("idcard").style.color = "black";
                    break;
                }
            }else{
                alert("Nhập số CMND là chữ số");
                document.getElementById("idcard").style.color = "black";
                break;
            }
        }
    }
    //Xét tính hợp lệ Email nhập
    //Nếu click vào lại mà không thay đổi thì không hiện thông báo nhập sai
    function checkemailCustomer() {
        let checkemail = true;
        let emailaddress = document.getElementById("emailCustomer").value;
        while (checkemail) {
            checkemail = false;
            let countDoc = 0;
            let countAt = 0;
            let i;
            for (i = 0; i < emailaddress.length; i++) {
                if (emailaddress.charAt(i) === ".") {
                    countDoc++;
                }
                if (emailaddress.charAt(i) === "@") {
                    countAt++;
                }
            }
            if ( countAt == 1 && countDoc>=1) {
                checkemail = true;
                alert("Nhập địa chỉ Email thành công");
                document.getElementById("emailCustomer").style.color = "blue";
                break;
            } else {
                checkemail = false;
                alert("Vui lòng nhập lại địa chỉ email");
                document.getElementById("emailCustomer").style.color = "black";
                break;
            }
        }
    }
    function hienthi1() {

        document.getElementById("name").style.color = "red";
        document.getElementById("name").disabled = "disabled";
        document.getElementById("idcard").style.color = "red";
        document.getElementById("idcard").disabled = "disabled";
        document.getElementById("birthdayCustomer").style.color = "red";
        document.getElementById("birthdayCustomer").disabled = "disabled";
        document.getElementById("emailCustomer").style.color = "red";
        document.getElementById("emailCustomer").disabled = "disabled";
        document.getElementById("addressCustomer").style.color = "red";
        document.getElementById("addressCustomer").disabled = "disabled";
        document.getElementById("typeCustomer").style.color = "red";
        document.getElementById("typeCustomer").disabled = "disabled";
        document.getElementById("discount").style.color = "red";
        document.getElementById("discount").disabled = "disabled";
        document.getElementById("numberofAccompanying").style.color = "red";
        document.getElementById("numberofAccompanying").disabled = "disabled";
        document.getElementById("rentDays").style.color = "red";
        document.getElementById("rentDays").disabled = "disabled";
        document.getElementById("typeService").style.color = "red";
        document.getElementById("typeService").disabled = "disabled";
        document.getElementById("1").style.color = "red";
        document.getElementById("2").style.color = "black";
        document.getElementById("3").style.color = "black";
        document.getElementById("3").value="Tiền thanh toán";
    }
    function hienthi2() {

        document.getElementById("name").style.color = "black";
        document.getElementById("name").disabled = "";
        document.getElementById("idcard").style.color = "black";
        document.getElementById("idcard").disabled =  "";
        document.getElementById("birthdayCustomer").style.color = "black";
        document.getElementById("birthdayCustomer").disabled =  "";
        document.getElementById("emailCustomer").style.color = "black";
        document.getElementById("emailCustomer").disabled =  "";
        document.getElementById("addressCustomer").style.color = "black";
        document.getElementById("addressCustomer").disabled =  "";
        document.getElementById("typeCustomer").style.color = "black";
        document.getElementById("typeCustomer").disabled =  "";
        document.getElementById("discount").style.color = "black";
        document.getElementById("discount").disabled =  "";
        document.getElementById("numberofAccompanying").style.color = "black";
        document.getElementById("numberofAccompanying").disabled =  "";
        document.getElementById("rentDays").style.color = "black";
        document.getElementById("rentDays").disabled = "";
        document.getElementById("typeService").style.color = "black";
        document.getElementById("typeService").disabled =  "";
        document.getElementById("1").style.color = "black";
        document.getElementById("2").style.color = "red";
        document.getElementById("3").style.color = "black";
        document.getElementById("3").value="Tiền thanh toán";
    }

    function hienthi3() {

        document.getElementById("name").style.color = "red";
        document.getElementById("name").disabled = "disabled";
        document.getElementById("idcard").style.color = "red";
        document.getElementById("idcard").disabled = "disabled";
        document.getElementById("birthdayCustomer").style.color = "red";
        document.getElementById("birthdayCustomer").disabled = "disabled";
        document.getElementById("emailCustomer").style.color = "red";
        document.getElementById("emailCustomer").disabled = "disabled";
        document.getElementById("addressCustomer").style.color = "red";
        document.getElementById("addressCustomer").disabled = "disabled";
        document.getElementById("typeCustomer").style.color = "red";
        document.getElementById("typeCustomer").disabled = "disabled";
        document.getElementById("discount").style.color = "red";
        document.getElementById("discount").disabled = "disabled";
        document.getElementById("numberofAccompanying").style.color = "red";
        document.getElementById("numberofAccompanying").disabled = "disabled";
        document.getElementById("rentDays").style.color = "red";
        document.getElementById("rentDays").disabled = "disabled";
        document.getElementById("typeService").style.color = "red";
        document.getElementById("typeService").disabled = "disabled";
        document.getElementById("1").style.color = "black";
        document.getElementById("2").style.color = "black";
        document.getElementById("3").style.color = "red";

        let typeService=document.getElementById('typeService').value;
        let addressCustomer=document.getElementById('addressCustomer').value;
        let typeCustomer=document.getElementById('typeCustomer').value;
        let rentDays=document.getElementById('rentDays').value;
        let discount=document.getElementById('discount').value;


        let priceservice;

        if (typeService === 'Villa') {
            priceservice = 500;
        } else if (typeService === 'House') {
            priceservice = 300;
        } else if (typeService === 'Room') {
            priceservice = 100;
        } else {
            priceservice = 50;
        }



        //Giam gia khach hang
        //Giam gia theo dia chi
        let saleaddress;
        if(addressCustomer=="Da Nang"){
            saleaddress=20;
        }else if(addressCustomer=='Hue'){
            saleaddress=10;
        }else if(addressCustomer=="Quang Nam"){
            saleaddress=5;
        }else {
            saleaddress=0;
        }

        //Giam gia theo loai the khach hang
        let saletypeCustomer;
        switch ( typeCustomer) {
            case('Diamond'):
                saletypeCustomer=15;
                break;
            case('Platium'):
                saletypeCustomer=10;
                break;
            case('Gold'):
                saletypeCustomer=5;
                break;
            case('Silver'):
                saletypeCustomer=2;
                break;
            case('Member'):
            default:
                saletypeCustomer=0;
                break;
        }
        //Giam gia theo do tuoi
        let currentYear=new Date().getFullYear();
        let birthday=new Date(birthdayCustomer).getFullYear();
        let ageCustomer;
        ageCustomer=currentYear-birthday;

        let saleageCustomer;
        if((ageCustomer>30) && (addressCustomer=="Da Nang")){
            saleageCustomer=2;
        }else if((ageCustomer<=30) && (ageCustomer>20) && (addressCustomer=="Da Nang")){
            saleageCustomer=1;
        }else{
            saleageCustomer=0;
        }

        let payments =  priceservice * rentDays * (1 - discount / 100)-(saleaddress+saletypeCustomer+saleageCustomer);
        document.getElementById("3").value=payments;



    }
</script>
</body>
</html>